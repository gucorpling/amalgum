<text id="autogum_academic_doc231" title="On the Stability of a Hardware Compensation Mechanism for Embedded Energy Harvesting Emulators" shortTile="stability-hardware" author="Valerio Freschi, Emanuele Lattanzi" type="academic" dateCollected="2019-11-03" sourceURL="https://www.mdpi.com/2073-431X/8/4/78/htm" speakerList="none" speakerCount="0">
<head> 3. System Architecture</head>
<p>
The reference system covered by this study is the energy harvesting embedded emulator presented in. The emulator controls the voltage and the current supplied to the powered device by real-time computing a mathematical model representing the emulated energy harvester. The emulator architecture is based on a MCU equipped with analog-to-digital (ADC) and digital-to-analog (DAC) converter channels which allow it to sense and to react as a real energy source. In particular, the main idea on which the system is based, is to continuously measure the current supplied to the load, by means of an ADC, and immediately impose the right voltage output to the load using a DAC. The value of the voltage to be generated is obtained by solving the mathematical model of the emulated source. To better understand the operation of the emulator, we report, in <figure>Figure 1</figure>, the basic schematic of the interface between the electric load (the device to be powered) and the MCU in charge of controlling the emulation. </p>

<p>The load, which can be a low-power device such as a sensor network mote, is represented in the circuit by a dashed rectangle containing the impedance . The emulator MCU controls the supply voltage by means of the  channel coupled to the load through two cascade blocks that make use of the operational amplifiers  and . </p>

<p>The first amplifier block which contains , , and , is used to boost the output of the DAC of the MCU into a voltage range suitable for the load device characteristics. The second block is composed of operational amplifier  in voltage follower configuration, in order to provide the required decoupling between the DAC output circuit and the load. </p>

<p>The current drawn by the load () is a function of the supply voltage () and of the load impedance , and it is indirectly measured by estimating the voltage drop  across the  resistor. This resistor is placed between the load and the ground and  is used by the MCU as an input of the mathematical model describing the energy harvester, in order to calculate the right value of the voltage to be supplied to the powered device. </p>

<p>An amplifier stage, composed of , , and , amplifies the  voltage in order to match the ADC working conditions before carrying it to the  channel which performs the digital conversion. A second ADC channel, namely , is used to monitor the value at the output of the voltage buffer  for debugging purposes. </p>

<p>The sensing resistor  introduces a reduction on the voltage supplied to the load with respect to the nominal value imposed by the emulator (i.e., the amplified DAC signal) according to the EH model. The hardware compensation mechanism, based on an analog circuit, boosts the voltage set by the DAC channel of the MCU by a quantity equal to . This hardware based mechanism dynamically and automatically counterbalances the voltage drop caused by the sensing resistor, with beneficial effects in terms of reactiveness of the emulation. <figure>Figure 2</figure> reports the schematic diagram of the emulator encompassing the hardware compensation components (enclosed within a shaded polygon). The compensation stage is built around an operational amplifier () working as voltage follower and an operational amplifier () in summing configuration (with resistors , , , ). The voltage follower decouples the sensing resistor from the adder which sums the voltage value  to the voltage output set by the DAC. The sum between the voltage signal from the DAC channel and the voltage signal across the sensing resistor is finally buffered thanks to the voltage follower based on . </p>
</text>
